#Events for error suppression. Please make sure we don't need these. TODO_CODE

namespace = error_suppression

#Show relation event
error_suppression.0001 = {
	hidden = yes
	orphan = yes
	
	trigger = {
		is_married = yes
	}
	
	option = {
		name = OK_BUTTON
		
		add_character_modifier = {
			modifier = matilda_of_canossa_modifier
		}
		add_character_modifier = {
			modifier = ep3_master_todor_modifier
		}
		add_character_modifier = {
			modifier = police_chief_of_baghdad_modifier
		}
		add_character_modifier = {
			modifier = guiscard_modifier
		}
		# Warcraft
		add_character_modifier = {
			modifier = fel_corruption_modifier
		}
		add_character_modifier = {
			modifier = loa_blessing
		}
		add_character_modifier = {
			modifier = dark_crystal_modifier
		}
		add_character_modifier = {
			modifier = book_of_medivh_modifier
		}
		set_variable = start_side_soldiers
		set_variable = end_side_soldiers
		set_variable = university
		set_variable = book_topic_united_title
		set_variable = book_topic_restored_title
		if = {
			limit = {
				has_variable = gui_union_rename_open
				var:gui_union_rename_open = flag:true
				has_global_variable = horde_story_has_ended
				has_variable = timer
				any_artifact = {
					has_variable = gorehowl
					has_variable = hammer_of_twilight
					has_variable = bloodhoof_runespear
				}
			}
		}
		random_artifact = {
			set_variable = no_gift
			set_variable = { #need until we add restoration and unification decisions
				name = book_artifact_topic
				value = flag:unification
			}
			set_variable = {
				name = book_artifact_topic
				value = flag:restoration
			}
		}

		
		# "Variable 'has_scripted_appearance' is used but is never set"
		# It's used in history, but we read the history after we check for these unused variable errors.
		add_character_flag = easteregg
		add_character_flag = has_scripted_appearance
		add_character_flag = has_scripted_weight
		add_character_flag = has_scripted_clothes
		add_character_flag = no_headgear
		add_character_flag = no_drunkard_visual
		add_character_flag = lady_in_shadows

		# lazy fix 
		add_character_flag = wildhammer
		add_character_flag = accolade_maa_lancers
		add_character_flag = cat_name_cruibne
		add_character_flag = accolade_maa_vanguards
		add_character_flag = night_elven
		add_character_flag = accolade_maa_outriders
		add_character_flag = centicore
		add_character_flag = chakravarti
		add_character_flag = the_small_book_on_theism
		add_character_flag = indrik
		add_character_flag = sayyid
		add_character_flag = modern_philosophy
		add_character_flag = ophiotaurus
		add_character_flag = high_elven
		add_character_flag = pygmy
		add_character_flag = accolade_maa_skirmishers
		add_character_flag = accolade_maa_crossbowers
		add_character_flag = sayaadi
		add_character_flag = golden_legend
		add_character_flag = cat_name_gyb
		add_character_flag = loss
		add_character_flag = city_of_god
		add_character_flag = summa_theologica
		add_character_flag = explore
		add_character_flag = accolade_maa_elephantiers
		add_character_flag = accolade_maa_pikes
		add_character_flag = accolade_maa_cameliers
		add_character_flag = catoblepas
		add_character_flag = intimidate
		add_character_flag = house_guard
		add_character_flag = cat_name_meone
		add_character_flag = cannibal_chad
		add_character_flag = white_peace
		add_character_flag = zoroastr
		add_character_flag = draenei
		add_character_flag = monocerus
		add_character_flag = orcish
		add_character_flag = demonic
		add_character_flag = accolade_maa_archers
		add_character_flag = lighthouse_of_alexandria
		add_character_flag = ogre
		add_character_flag = bulgu
		add_character_flag = saoshyant
		add_character_flag = gnomish
		add_character_flag = goblin
		add_character_flag = sic_et_non
		add_character_flag = tarasque
		add_character_flag = keewakw
		add_character_flag = mausoleum_at_halicarnassus
		add_character_flag = scourge
		add_character_flag = troll
		add_character_flag = chief_qadi
		add_character_flag = dwarf
		add_character_flag = equal_law
		add_character_flag = erchitu
		add_character_flag = poop
		add_character_flag = ep2_travel_bridge
		add_character_flag = buy
		add_character_flag = hadhayosh
		add_character_flag = blood_troll
		add_character_flag = temptress
		add_character_flag = iberian_muslim
		add_character_flag = mangonel
		add_character_flag = onager
		add_character_flag = beast
		add_character_flag = vixen
		add_character_flag = interloper
		add_character_flag = plakountas
		add_character_flag = stallion
		add_character_flag = huscarl
		add_character_flag = minx
		add_character_flag = siren
		add_character_flag = enchantress
		add_character_flag = bombard
		add_character_flag = koptoplakous
		add_character_flag = iberian_christian
		add_character_flag = longbowmen
		add_character_flag = stud
		
		if = { limit = {
				# "Variable 'has_scripted_appearance' is set but is never used"
				# In no-graphics we never read the portrait script that uses these flags, so then the above fix causes issues.
				has_character_flag = easteregg
				has_character_flag = lady_in_shadows
				has_character_flag = has_scripted_appearance
				has_character_flag = has_scripted_weight
				has_character_flag = has_scripted_clothes
				has_character_flag = no_headgear
				has_character_flag = no_drunkard_visual
				has_character_flag = wc_light_magic_lifestyle_perks_were_reset_flag
				has_character_flag = wc_disorder_magic_lifestyle_perks_were_reset_flag
				
				# Warcraft
				has_variable = wc_light_magic_lifestyle_additional_perks_variable
				has_variable = wc_shadow_magic_lifestyle_additional_perks_variable
				has_variable = wc_disorder_magic_lifestyle_additional_perks_variable
				has_variable = wc_order_magic_lifestyle_additional_perks_variable
				has_variable = wc_life_magic_lifestyle_additional_perks_variable
				has_variable = wc_death_magic_lifestyle_additional_perks_variable
				has_variable = wc_elemental_fire_magic_lifestyle_additional_perks_variable
				has_variable = wc_elemental_water_magic_lifestyle_additional_perks_variable
				has_variable = wc_elemental_air_magic_lifestyle_additional_perks_variable
				has_variable = wc_elemental_earth_magic_lifestyle_additional_perks_variable
				has_variable = wc_endurance_physical_lifestyle_additional_perks_variable
				has_variable = wc_dexterity_physical_lifestyle_additional_perks_variable
				has_variable = wc_strength_physical_lifestyle_additional_perks_variable
				is_target_in_variable_list = {
					name = artifact_rewards
					target = root
				}
				is_target_in_variable_list = {
					name = trait_rewards
					target = root
				}
				# exists = var:reichskrone
				# exists = var:pope_hat
				has_variable = show_historical_gui
			} }
			# Warcraft
			add_character_flag = is_medivh_flag #Used in history
			add_character_flag = wc_light_magic_lifestyle_perks_were_reset_flag
			add_character_flag = wc_disorder_magic_lifestyle_perks_were_reset_flag
			add_character_flag = lich_king_champion_flag
	
			set_variable = { name = wc_light_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_shadow_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_disorder_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_order_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_life_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_death_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_elemental_fire_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_elemental_water_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_elemental_air_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_elemental_earth_magic_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_endurance_physical_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_dexterity_physical_lifestyle_additional_perks_variable value = yes }
			set_variable = { name = wc_strength_physical_lifestyle_additional_perks_variable value = yes }
			set_variable = relic
			set_variable = { name = city_location value = no }
			set_variable = { name = tutorial_completed value = yes }
			set_variable = { name = varangian_regiments value = 0 }
			set_variable = artifact_succession_title #since we dont have any artifact tied to title now, this is in error.log
			##godhjera shader pack
			set_variable = { name = GH_is_limestone_statue value = no }
			set_variable = { name = GH_is_copper_statue value = no }
			set_variable = { name = GH_is_gold_statue value = no }
			set_variable = { name = GH_is_copper_rust_statue value = no }
			set_variable = { name = GH_is_marble_statue value = no }
			set_variable = { name = GH_is_stone_statue value = no }
			set_variable = { name = is_in_tutorial value = no }

			set_variable = { name = disease_data_character_dysentery_amount value = no }
			set_variable = { name = disease_data_character_ergotism_amount value = no }
			set_variable = { name = disease_data_character_measles_amount value = no }
			set_variable = { name = struggle_block_dissolution_faction value = no }
			

			save_scope_value_as = { name = piety_cost_reduction value = no }

			wc_achievement_error_suppression_effects = yes
	}
}
# EP1 achievement variable erroring from not being used outside of ep1_achievements.txt
error_suppression.0002 = {
	hidden = yes
	orphan = yes
	
	trigger = {
		any_character_artifact = {
			exists = var:last_person_to_steal 
		}
	}
	
	option = {
		name = OK_BUTTON
	}
}
# Memory events to make sure they appear in the right order chronologically
error_suppression.0003 = {
	hidden = yes
	
	immediate = {
		create_character_memory = {
			type = imprisoned_other
			
			participants = {
				imprisoned = scope:prisoner_memory
			}
		}
	}
	
	option = {
		name = OK_BUTTON
	}
}

#Suppression of legend properties 
error_suppression.0004 = {
	hidden = yes
	orphan = yes
	
	trigger = {
		# var:dummy ?= flag:kumari_kandam
		# var:dummy ?= flag:prester_john_kingdom
		# var:dummy ?= flag:china
		# var:dummy ?= flag:bald_mountain
		# var:dummy ?= flag:olympus
		# var:dummy ?= flag:beyul
		# var:dummy ?= flag:hindustan
		# var:dummy ?= flag:irum
		# var:dummy ?= flag:atlantis
		# var:dummy ?= flag:himavanta
		# var:dummy ?= flag:mahishmati
		# var:dummy ?= flag:albion
		
		# Warcraft - legendary places
		var:dummy ?= flag:legendary_nazjatar
		var:dummy ?= flag:legendary_pandaria
		var:dummy ?= flag:legendary_kalimdor
		var:dummy ?= flag:legendary_uldum
		var:dummy ?= flag:legendary_black_empire
		var:dummy ?= flag:legendary_argus
		var:dummy ?= flag:legendary_eastern_kingdoms
		var:dummy ?= flag:legendary_dragon_isles
		var:dummy ?= flag:legendary_zul_empire
		var:dummy ?= flag:legendary_broken_isles
		var:dummy ?= flag:legendary_arathor_empire
		var:dummy ?= flag:legendary_draenor
		var:dummy ?= flag:legendary_kaldorei_empire
		var:dummy ?= flag:legendary_gorian_empire
		var:dummy ?= flag:legendary_beyond_the_mists
		var:dummy ?= flag:legendary_zandalar
		var:dummy ?= flag:legendary_northrend
		var:dummy ?= flag:legendary_azjol_nerub
		var:dummy ?= flag:legendary_twisting_nether
		var:dummy ?= flag:legendary_plane_water
		var:dummy ?= flag:legendary_plane_air
		var:dummy ?= flag:legendary_plane_earth
		var:dummy ?= flag:legendary_plane_fire
	}
	
	option = {
		name = OK_BUTTON
		set_variable = {
			name = dummy
			value = 1
		}
	}
}
