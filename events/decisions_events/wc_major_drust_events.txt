namespace = drust_crisis

### DRUST INCURSION DECISION EVENTS ###
#Gorak Tul invades - triggered by Summon Gorak Tul decision
drust_crisis.1 = {
	type = character_event
	title = drust_crisis.1.t
	desc = drust_crisis.1.desc
	theme = realm
	right_portrait = {
		character = root
		animation = idle
	}

	immediate = {
		save_scope_as = summoner		
		set_global_variable = drust_incursion_happened		# Locks the crisis opening event if it didn't happen
	}
	
	right_portrait = {
		character = scope:summoner
		animation = spymaster
	}

	option = {
		name = drust_crisis.1.a
		custom_tooltip = drust_crisis.1.a.tt
		
		# Summon Gorak Tul
		create_character = {
			template = gorak_tul_character_template
			save_scope_as = gorak_tul
			location = root.location
		}
	
		trigger_event = drust_crisis.3
	}
}

drust_crisis.2 = { # Sets up the court
	type = character_event
	title = drust_crisis.2.t
	desc = drust_crisis.2.desc
	theme = realm
	override_background = wc_throne_of_thunder

	immediate = {
		gorak_tul_create_court_effect = yes
		save_scope_as = gorak_tul
	}
	
	lower_left_portrait = {
		character = scope:ingra_maloch
	}
	lower_right_portrait = {
		character = scope:ingra_drif
	}
	lower_center_portrait = {
		character = scope:ingra_saor
	}

	left_portrait = {
		character = ROOT
		animation = war_over_win
	}

	right_portrait = {
		character = scope:summoner
		animation = personality_honorable
	}

	option = {
		name = drust_crisis.2.a
		custom_tooltip = drust_crisis.2.a.tt
	}
}

drust_crisis.3 = { # Summoner swears fealty to Gorak Tul
	type = character_event
	title = drust_crisis.3.t
	desc = drust_crisis.3.desc
	theme = realm
	override_background = wc_throne_of_thunder

	immediate = {
		save_scope_as = summoner
		scope:gorak_tul = {
			save_scope_as = gorak_tul
			set_variable = {
				name = summoner
				value = ROOT
			}
		}
	}

	left_portrait = {
		character = ROOT
		animation = celebrate_mace
	}

	right_portrait = {
		character = scope:gorak_tul
		animation = war_over_win
	}

	option = {
		name = drust_crisis.3.a
		scope:gorak_tul = {
			gorak_tul_effect = yes
		}
		set_player_character = scope:gorak_tul
		ai_chance = {
			base = 0
		}
	}

	option = {
		name = drust_crisis.3.b
		custom_tooltip = drust_crisis.3.warning.tt
		scope:gorak_tul = {
			gorak_tul_effect = yes
		}
	}
	after = {
		scope:gorak_tul = {	# Gorak Tul Setup
			create_story = story_drust_incursion
		}
	}
}