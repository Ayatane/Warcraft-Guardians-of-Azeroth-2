namespace = wc_elemental_ritual_events

######################################
# 1000 - 1499
# Fire Ritual (Spirit) By Shatterstar & Dione
######################################

# Prepare for your journey to the plane
wc_elemental_ritual_events.1001 = { 
	title = wc_elemental_ritual_events.1001.title
	desc = wc_elemental_ritual_events.1001.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }

	#begin event
	option = { 

	}

	#cancel event
	option = { 
		trigger_event = { 
			id = wc_elemental_ritual_events.1005
			days = 1
		}
	}
}

# Start the ritual to enter the plane
wc_elemental_ritual_events.1002 = { 
	title = wc_elemental_ritual_events.1002.title
	desc = wc_elemental_ritual_events.1002.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }

	# call on air spirits for additional aid, all air spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_air_favour_current_value > wc_spirit_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = air_magic_tree_1 value > 5 }
				perks_in_tree = { tree = air_magic_tree_2 value > 5 }
			}
		}
	}

	#call on earth spirits for additional aid, all earth spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_earth_favour_current_value > wc_spirit_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = earth_magic_tree_1 value > 5 }
				perks_in_tree = { tree = earth_magic_tree_2 value > 5 }
			}
		}
	}

	#call on water spirits for additional aid, all water spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_water_favour_current_value > wc_spirit_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = water_magic_tree_1 value > 5 }
				perks_in_tree = { tree = water_magic_tree_2 value > 5 }
			}
		}
	}

	option = { 
		
	}
}

# Successful Ritual
wc_elemental_ritual_events.1003 = { 
	title = wc_elemental_ritual_events.1003.title
	desc = wc_elemental_ritual_events.1003.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }

	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# Ritual Encounters a Problem
wc_elemental_ritual_events.1004 = { 
	title = wc_elemental_ritual_events.1004.title
	desc = wc_elemental_ritual_events.1004.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# End the event early
wc_elemental_ritual_events.1005 = { 
	title = wc_elemental_ritual_events.1005.title
	desc = wc_elemental_ritual_events.1005.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
}

# Arrival on the Plane - Elements Ignore You
wc_elemental_ritual_events.1100 = { 
	title = wc_elemental_ritual_events.1100.title
	desc = wc_elemental_ritual_events.1100.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# all options lead to 1101
	# use diplomacy to try to get their attention
	option = { 

	}
	# use a display of fire magic to get their attention
	option = { 
		
	}
	# summon a terrestrial elemental to guide you
	option = { 
		
	}
}

# Arrival on the Plane - Elements Welcome You
wc_elemental_ritual_events.1101 = { 
	title = wc_elemental_ritual_events.1100.title
	desc = wc_elemental_ritual_events.1101.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# all options lead to 1110
	# accept the gift of flame
	option = { 
		# grants magical power
	}
	# accept the gift of magma
	option = { 
		# solidifies into gold
	}
	# graciously refuse their gifts
	option = { 
		# gamble based on learning and diplomacy to get huge amounts of piety and prestige
	}
}

# Journey through the Plane
wc_elemental_ritual_events.1110 = { 
	title = wc_elemental_ritual_events.1110.title
	desc = wc_elemental_ritual_events.1110.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# all options lead to 1120
	# journey through the howling spires
	option = { 
		# get bonuses related to air magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_air QUEST = spirit }
	}
	# journey through the magma sea
	option = { 
		# get bonuses related to water magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_water QUEST = spirit }
	}
	# journey through the erupting ranges
	option = { 
		# get bonuses related to earth magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_earth QUEST = spirit }
	}
	# journey through the heartfire forest
	option = { 
		# get bonuses related to life magic
		planar_journey_route = { PLANE = fire MAGIC = life QUEST = spirit }
	}
	# journey though the great conflagration
	option = { 
		# get bonuses related to fire magic
		trigger_event = { 
			id = wc_elemental_ritual_events.1120
			days = { 60 120 }
		}
	}
}

# Outside the Firelord's Palace
wc_elemental_ritual_events.1120 = { 
	title = wc_elemental_ritual_events.1102.title
	desc = wc_elemental_ritual_events.1102.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# wowwww palace is so cooooool
	option = { 

	}
}

# Welcomed into the Palace
wc_elemental_ritual_events.1200 = { 
	title = wc_elemental_ritual_events.1200.title
	desc = wc_elemental_ritual_events.1200.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# Audience with the Firelord
wc_elemental_ritual_events.1210 = { 
	title = wc_elemental_ritual_events.1210.title
	desc = wc_elemental_ritual_events.1210.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# Feast of Elemental Fire
wc_elemental_ritual_events.1220 = { 
	title = wc_elemental_ritual_events.1220.title
	desc = wc_elemental_ritual_events.1220.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# Return Home from the Elemental Plane of Fire
wc_elemental_ritual_events.1300 = { 
	title = wc_elemental_ritual_events.1300.title
	desc = wc_elemental_ritual_events.1300.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
	option = { 
		
	}
	option = { 
		
	}
}

# End of the questline
wc_elemental_ritual_events.1310 = { 
	title = wc_elemental_ritual_events.1310.title
	desc = wc_elemental_ritual_events.1310.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { 

	}
}


######################################
# 1500 - 1999
# Fire Ritual (Decay)
######################################
# Prepare the invasion
wc_elemental_ritual_events.1501 = { 
	title = wc_elemental_ritual_events.1501.title
	desc = wc_elemental_ritual_events.1501.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# proceed -> 1502
	option = { }

	# cancel -> 1505
	option = { }
}

# Open the portal
wc_elemental_ritual_events.1502 = { 
	title = wc_elemental_ritual_events.1502.title
	desc = wc_elemental_ritual_events.1502.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# call on air spirits for additional aid, all air spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_air_favour_current_value < wc_decay_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = air_magic_tree_1 value > 5 }
				perks_in_tree = { tree = air_magic_tree_2 value > 5 }
			}
		}
	}

	#call on earth spirits for additional aid, all earth spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_earth_favour_current_value < wc_decay_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = earth_magic_tree_1 value > 5 }
				perks_in_tree = { tree = earth_magic_tree_2 value > 5 }
			}
		}
	}

	#call on water spirits for additional aid, all water spells go on cooldown
	option = { 
		trigger = { 
			wc_elemental_water_favour_current_value < wc_decay_elemental_favour_threshold_value
			OR = { 
				perks_in_tree = { tree = water_magic_tree_1 value > 5 }
				perks_in_tree = { tree = water_magic_tree_2 value > 5 }
			}
		}
	}

	option  = { 

	}
}

# Establish a beachhead
wc_elemental_ritual_events.1503 = { 
	title = wc_elemental_ritual_events.1503.title
	desc = wc_elemental_ritual_events.1503.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# can lead to 1600 or 1601 depending on magical prowess and army size
	option = { }
}

# Portal is unstable
wc_elemental_ritual_events.1504 = { 
	title = wc_elemental_ritual_events.1504.title
	desc = wc_elemental_ritual_events.1504.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# keep going -> 1503
	option = { }

	# cancel -> 1505
	option = { }
}

# Cancel the invasion (following 1501 or 1504)
wc_elemental_ritual_events.1505 = { 
	title = wc_elemental_ritual_events.1505.title
	desc = wc_elemental_ritual_events.1505.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	option = { }
}

# Elementals oppose you
wc_elemental_ritual_events.1600 = { 
	title = wc_elemental_ritual_events.1600.title
	desc = wc_elemental_ritual_events.1600.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# all options lead to 1601
	# meet them in battle (Martial & Prowess)
	option = { }

	# kill them personally until they submit (Prowess & Dread)
	option = { }

	# assassinate any who oppose you (Intrigue & Dread)
	option = { }
}

# Elementals submit to you
wc_elemental_ritual_events.1601 = { 
	title = wc_elemental_ritual_events.1601.title
	desc = wc_elemental_ritual_events.1601.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# all options lead to 1610
	# use them to bolster your army in the elemental plane
	option = { }

	# bring them back to the material plane as slaves
	option = { }

	# feed off their power
	option = { }
}

wc_elemental_ritual_events.1610 = { 
	title = wc_elemental_ritual_events.1610.title
	desc = wc_elemental_ritual_events.1610.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# march across the howling spires
	option = { 
		# get bonuses related to air magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_air QUEST = decay }
	}
	# march across the magma sea
	option = { 
		# get bonuses related to water magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_water QUEST = decay }
	}
	# march across the erupting ranges
	option = { 
		# get bonuses related to earth magic
		planar_journey_route = { PLANE = fire MAGIC = elemental_earth QUEST = decay }
	}
	# march across the ashen pits
	option = { 
		# get bonuses related to death magic
		planar_journey_route = { PLANE = fire MAGIC = death QUEST = decay }
	}
	# journey though the great conflagration
	option = { 
		# get bonuses related to fire magic
		trigger_event = { 
			id = wc_elemental_ritual_events.1120
			days = { 60 120 }
		}
	}
}

# arriving at the Firelord's Palace
wc_elemental_ritual_events.1620 = { 
	title = wc_elemental_ritual_events.1620.title
	desc = wc_elemental_ritual_events.1620.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# victory shall be ours!
	option = { }
}

# decide on your siege method
wc_elemental_ritual_events.1700 = { 
	title = wc_elemental_ritual_events.1700.title
	desc = wc_elemental_ritual_events.1700.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	

	# traditional siege method (martial + stewardship) -> long, low risk -> 1800 (success) or 1802 (failure)
	option = { }

	# infiltration (diplomacy + intrigue) -> medium, medium risk -> 1710
	option = { }

	# stratagem of war (martial + intrigue) -> short, high risk -> 1720
	option = { }
}

# breach the gates
wc_elemental_ritual_events.1710 = { 
	title = wc_elemental_ritual_events.1710.title
	desc = wc_elemental_ritual_events.1710.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
}

# enter the sanctum and defeat the firelord
wc_elemental_ritual_events.1720 = { 
	title = wc_elemental_ritual_events.1720.title
	desc = wc_elemental_ritual_events.1720.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
}

# accept the Firelord's surrender
wc_elemental_ritual_events.1800 = { 
	title = wc_elemental_ritual_events.1800.title
	desc = wc_elemental_ritual_events.1800.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
}


# return victorious with many elemental slaves
wc_elemental_ritual_events.1801 = { 
	title = wc_elemental_ritual_events.1801.title
	desc = wc_elemental_ritual_events.1801.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
}

# defeated by firelord but still got some slaves
wc_elemental_ritual_events.1802 = { 
	title = wc_elemental_ritual_events.1802.title
	desc = wc_elemental_ritual_events.1802.desc
	theme = elemental_fire
	override_background = { reference = bp1_bonfire }
	
}

######################################
# 2000 - 2499
# Water Ritual (Spirit)
######################################


######################################
# 2500 - 2999
# Water Ritual (Decay)
######################################


######################################
# 3000 - 3499
# Air Ritual (Spirit)
######################################


######################################
# 3500 - 3999
# Air Ritual (Decay)
######################################


######################################
# 4000 - 4499
# Earth Ritual (Spirit)
######################################


######################################
# 4500 - 4999
# Earth Ritual (Decay)
######################################


######################################
# Helper Functions
######################################

# duration to next effect is weighted by proficiency in the relevant magic type
scripted_effect planar_journey_route = { 
	random_list = { 
		5 = { 
			modifier = { 
				OR = {
					perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
					perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
				}
				add = 5
			}
			modifier = { 
				OR = {
					perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 9 }
					perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 9 }
				}
				add = 5
			}
			if = { limit = { flag:$PLANE$ = flag:fire }
				if = { limit = { flag:$QUEST$ = flag:SPIRIT } 
					trigger_event = { 
						id = wc_elemental_ritual_events.1120
						days = {7 14}
					}
				}
				else = { 
					trigger_event = { 
						id = wc_elemental_ritual_events.1620
						days = {7 14}
					}
				}
			}
		}
		10 = {  
			modifier = { 
				OR = {
					perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
					perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
				}
				add = 15
			}
			if = { limit = { flag:$PLANE$ = flag:fire }
				if = { limit = { flag:$QUEST$ = flag:SPIRIT } 
					trigger_event = { 
						id = wc_elemental_ritual_events.1120
						days = {21 60}
					}
				}
				else = { 
					trigger_event = { 
						id = wc_elemental_ritual_events.1620
						days = {21 60}
					}
				}
			}
		}
		10 = {  
			modifier = { 
				OR = {
					perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
					perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
				}
				add = 5
			}
			if = { limit = { flag:$PLANE$ = flag:fire } 
				if = { limit = { flag:$QUEST$ = flag:SPIRIT } 
					trigger_event = { 
						id = wc_elemental_ritual_events.1120
						days = {60 90}
					}
				}
				else = {
					trigger_event = { 
						id = wc_elemental_ritual_events.1620
						days = {60 90}
					}
				}
			}
		}
		25 = {  
			modifier = { 
				OR = {
					perks_in_tree = { tree = $MAGIC$_magic_tree_1 value > 1 }
					perks_in_tree = { tree = $MAGIC$_magic_tree_2 value > 1 }
				}
				add = -20
			}
			if = { limit = { flag:$PLANE$ = flag:fire } 
				if = { limit = { flag:$QUEST$ = flag:SPIRIT } 
					trigger_event = { 
						id = wc_elemental_ritual_events.1120
						days = {90 120}
					}
				}
				else = { 
					trigger_event = { 
						id = wc_elemental_ritual_events.1620
						days = {90 120}
					}
				}
			}
		}
	}
}
