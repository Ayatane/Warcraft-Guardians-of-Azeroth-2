namespace = wc_elemental_story_events
#################################
###### Ritual: Planar Fire ######
########### By Dione ############
#################################
### 001 - 100 Planar Fire: Spirit
### 101 - 200 Planar Fire: Decay

wc_elemental_story_events.001 = {
	title = wc_elemental_story_events.001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = planar_fire_spirit
				}
				desc = wc_elemental_story_events.001.d_returned
			}
		}
		desc = wc_elemental_story_events.001.d
	}

	theme = elemental_fire
	override_background = { reference = bp1_bonfire }

	immediate = {
		add_prestige = 50
		if = {
			limit = {
				NOT = { has_variable = wc_elemental_fire_favour_variable }
			}
			set_variable = { name = wc_$ELEMENT$_favour_variable value = wc_starting_elemental_fire_favour_value }
		}
	}

	option = {
		name = wc_elemental_story_events.001.a
		random_list = {
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = 15
					}
					wc_elemental_fire_favour_script_var > 0
				}
				add_character_flag = {
					flag = elements_listen
					days = 10
				}
				desc = wc_elements_listen
				custom_tooltip = wc_gift_power_increase
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = -15
					}
					wc_elemental_fire_favour_script_var < 0
				}
				desc = wc_elements_dont_listen
				custom_tooltip = wc_gift_power_decrease
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
		}
	}
}

wc_elemental_story_events.002 = { # Round 1 Asking
	title = wc_elemental_story_events.001.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = elements_listen
				}
				desc = wc_elemental_story_events.002.success
			}
			triggered_desc = {
				trigger = {
					NOT = { has_character_flag = elements_listen }
				}
				desc = wc_elemental_story_events.002.failure
			}
		}
	}

	theme = elemental_fire
	override_background = { reference = bp1_bonfire }

	immediate = {
		set_variable = {
			name = elemental_fire_cycle_mult
			value = 1
		}
		if = {
			limit = {
				has_character_flag = elements_listen
			}
			change_variable = {
				name = elemental_fire_cycle_mult
				add = 0.5
			}
		}
		else = {
			change_variable = {
				name = elemental_fire_cycle_mult
				add = -0.5
			}
		}
	}

	option = { # Ask for Protection
		name = wc_elemental_story_events.002.protection
		random_list = {
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = 15
					}
					wc_elemental_fire_favour_script_var > 0
				}
				add_character_flag = {
					flag = elements_listen
					days = 10
				}
				desc = wc_gift_power_big
				add_character_modifier = {
					modifier = wc_elemental_fire_major_protection_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = -15
					}
					wc_elemental_fire_favour_script_var < 0
				}
				add_character_modifier = {
					modifier = wc_elemental_fire_minor_protection_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				desc = wc_gift_power_good
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
		}
	}
	option = { # Ask for Efficiency
		name = wc_elemental_story_events.002.efficiency
		random_list = {
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = 15
					}
					wc_elemental_fire_favour_script_var > 0
				}
				add_character_flag = {
					flag = elements_listen
					days = 10
				}
				desc = wc_gift_power_big
				add_character_modifier = {
					modifier = wc_elemental_fire_major_efficiency_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = -15
					}
					wc_elemental_fire_favour_script_var < 0
				}
				add_character_modifier = {
					modifier = wc_elemental_fire_minor_efficiency_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				desc = wc_gift_power_good
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
		}
	}
	option = { # Ask for Companionship
		name = wc_elemental_story_events.002.companionship
		random_list = {
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = 15
					}
					wc_elemental_fire_favour_script_var > 0
				}
				add_character_flag = {
					flag = elements_listen
					days = 10
				}
				desc = wc_gift_power_big
				add_character_modifier = {
					modifier = wc_elemental_fire_major_companionship_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
			50 = {
				modifier = {
					factor = {
						value = wc_elemental_fire_favour_script_var
						divide = -15
					}
					wc_elemental_fire_favour_script_var < 0
				}
				add_character_modifier = {
					modifier = wc_elemental_fire_minor_companionship_modifier
					days = wc_spell_planar_fire_duration_days_value
				}
				desc = wc_gift_power_good
				compare_modifier = {
					value = scope:duel_value
					multiplier = 2
					min = -49
				}
			}
		}
	}
}

wc_elemental_story_events.003 = { # Commune again
	title = wc_elemental_story_events.003.t
	desc = wc_elemental_story_events.003.d
}