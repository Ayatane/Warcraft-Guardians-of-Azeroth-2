wc_remove_secret_override = {
    if = {
        limit = {
            is_magic_secret_trigger = no
        }
        remove_secret = yes
    }
}

wc_event_chance_to_expose_secret_effect = { #Parameters: MAGICTYPE = magic school being tested, VALUE = base *percent* chance that secret will be exposed
    if = { 
        limit = { 
            OR = { 
                faith.has_doctrine = doctrine_$MAGICTYPE$_magic_shunned
                faith.has_doctrine = doctrine_$MAGICTYPE$_magic_crime
            }
        }
        random = { 
            chance = { 
                value = $VALUE$
                add = wc_event_spellcast_chance_to_expose_magic_secret_value
            }
            random_secret = { 
                limit = { 
                    secret_type = secret_$MAGICTYPE$_magic_user
                }
                expose_secret = root # oops i done exposed myself, hopefully there werent any kids around
            }
        }
    }
}