open_professions_sgui = {
	scope = character

	effect = {
		if = { limit = { NOT = { exists = var:known_reagents_count } }
			set_variable = {
				name = known_reagents_count
				value = 0
			}
		}
		if = {
			limit = { NOT = { exists = global_var:mining_reagents_done } }
			init_mining_reagents_effect = yes
		}
	}
}

save_profession_sgui = {
	scope = character
	saved_scopes = { selected_profession }
	effect = {
		switch = {
			trigger = scope:selected_profession
			flag:Mining = {
				create_story = mining_story_cycle
			}
		}
	}
}

remove_profession_sgui = {
	scope = character
	saved_scopes = { selected_profession }
	effect = {
		switch = {
			trigger = scope:selected_profession
			flag:Mining = {
				random_owned_story = {
					limit = { story_type = mining_story_cycle }
					end_story = yes
				}
			}
		}
	}
}

close_current_view_sgui = {
	scope = character
	effect = {
		if = {
			limit = { has_variable_list = current_view_list }
			clear_variable_list = current_view_list
		}
	}
}

sell_reagent_sgui = {
	scope = character
	saved_scopes = { reagent }
	effect = {
		modify_reagent_effect = {
			REAGENT = scope:reagent
			EFFECT = sell_reagent_effect 
		}
	}
}

set_reagent_commerce_sgui = {
	scope = character
	saved_scopes = { commerce }
	effect = {
		switch = {
			trigger = scope:commerce
			flag:ore = {
				set_variable = {
					name = commerce_type
					value = flag:ore
				}
			}
			flag:bar = {
				set_variable = {
					name = commerce_type
					value = flag:bar
				}
			}
		}
	}
}

smelt_reagent_sgui = {
	scope = character
	saved_scopes = { reagent }
	effect = {
		modify_reagent_effect = {
			REAGENT = scope:reagent
			EFFECT = smelt_reagent_effect 
		}
	}
}

extract_reagent_sgui = {
	scope = character

	effect = {
		extract_ores_effect = yes
	}
}

batch_start_sgui = {
	scope = character

	effect = {
		set_variable = {
			name = batch_amount
			value = 0
		}
	}
}

add_batch_sgui = {
	scope = character
	effect = {
		change_variable = {
			name = batch_amount
			add = 1
		}
	}
}

remove_batch_sgui = {
	scope = character
	effect = {
		change_variable = {
			name = batch_amount
			add = -1
		}
	}
}
add_ore_batch_sgui = {
	scope = character
	effect = {
		change_variable = {
			name = batch_amount
			add = 5
		}
	}
}

remove_ore_batch_sgui = {
	scope = character
	effect = {
		change_variable = {
			name = batch_amount
			add = -5
		}
	}
}